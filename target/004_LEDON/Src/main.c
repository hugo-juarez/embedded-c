/**
 ******************************************************************************
 * @file           : main.c
 * @author         : Auto-generated by STM32CubeIDE
 * @brief          : Main program body
 ******************************************************************************
 * @attention
 *
 * Copyright (c) 2025 STMicroelectronics.
 * All rights reserved.
 *
 * This software is licensed under terms that can be found in the LICENSE file
 * in the root directory of this software component.
 * If no LICENSE file comes with this software, it is provided AS-IS.
 *
 ******************************************************************************
 */

#include <stdint.h>


int main(void)
{
	uint32_t *pClkCtrlReg = (uint32_t*) 0x40023830;
	uint32_t *pPortDModeReg = (uint32_t*) 0x40020C00;
	uint32_t *pPortDOutRef = (uint32_t*) 0x40020C14;

	//1. Enable AHB1 peripheral GPIOD without affecting other peripheral hence we use |
	// We only affect the third bit
	*pClkCtrlReg |= 1 << 3;

	//2. Configure the mode of the GPIO D port
	//Lets first clear the two bits we are going to use for pin 12, which is bit 24 and 25
	*pPortDModeReg &= ~(3 << 24);

	//Now that we know the values are 0 we can set the bit we need to 1 which is 24
	*pPortDModeReg |= (1<<24);


    /* Loop forever */
	for(;;){
		//3. Finally set output value to 1
		*pPortDOutRef |= (1<<12);

		//Adding delay
		for( uint32_t i=0 ; i<10000000;i++);

		//Turn LED off
		*pPortDOutRef &= ~(1<<12);

		//Adding delay
		for( uint32_t i=0 ; i<10000000;i++);



	}
}
